{"ast":null,"code":"var _jsxFileName = \"/Users/davidroberts/projects/GraphQL/ApolloTutorial/fullstack-tutorial/final/client/src/containers/logout-button.tsx\";\nimport React from 'react';\nimport styled from 'react-emotion';\nimport { useApolloClient } from '@apollo/client';\nimport { menuItemClassName } from '../components/menu-item';\nimport { isLoggedInVar } from '../cache';\nimport { ReactComponent as ExitIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/icons/exit.svg\";\n\nconst LogoutButton = () => {\n  const client = useApolloClient();\n  return /*#__PURE__*/React.createElement(StyledButton, {\n    \"data-testid\": \"logout-button\",\n    onClick: () => {\n      // Since we're logging out, remove all traces of the current user\n      // from the cache. First use `cache.evict()` to remove the stored\n      // `me` reference that was added to the cache by the `GET_MY_TRIPS`\n      // query in `profile.tsx`. Then trigger garbage collection using\n      // `cache.gc()` to remove the cached `User` object that is no longer\n      // reachable.\n      client.cache.evict({\n        fieldName: 'me'\n      });\n      client.cache.gc(); // Remove user details from localStorage.\n\n      localStorage.removeItem('token');\n      localStorage.removeItem('userId'); // Let other parts of the application that are relying on logged in\n      // state know we're now logged out.\n\n      isLoggedInVar(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ExitIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }), \"Logout\");\n};\n\nexport default LogoutButton;\n/**\n * STYLED COMPONENTS USED IN THIS FILE ARE BELOW HERE\n */\n\nconst StyledButton = styled('button')(menuItemClassName, {\n  background: 'none',\n  border: 'none',\n  padding: 0\n});","map":{"version":3,"sources":["/Users/davidroberts/projects/GraphQL/ApolloTutorial/fullstack-tutorial/final/client/src/containers/logout-button.tsx"],"names":["React","styled","useApolloClient","menuItemClassName","isLoggedInVar","LogoutButton","client","cache","evict","fieldName","gc","localStorage","removeItem","StyledButton","background","border","padding"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAASC,eAAT,QAAgC,gBAAhC;AAEA,SAASC,iBAAT,QAAkC,yBAAlC;AACA,SAASC,aAAT,QAA8B,UAA9B;;;AAGA,MAAMC,YAAY,GAAG,MAAM;AACzB,QAAMC,MAAM,GAAGJ,eAAe,EAA9B;AACA,sBACE,oBAAC,YAAD;AACE,mBAAY,eADd;AAEE,IAAA,OAAO,EAAE,MAAM;AACb;AACA;AACA;AACA;AACA;AACA;AACAI,MAAAA,MAAM,CAACC,KAAP,CAAaC,KAAb,CAAmB;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAnB;AACAH,MAAAA,MAAM,CAACC,KAAP,CAAaG,EAAb,GARa,CAUb;;AACAC,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,QAAxB,EAZa,CAcb;AACA;;AACAR,MAAAA,aAAa,CAAC,KAAD,CAAb;AACD,KAnBH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAqBE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBF,WADF;AA0BD,CA5BD;;AA8BA,eAAeC,YAAf;AAEA;;;;AAIA,MAAMQ,YAAY,GAAGZ,MAAM,CAAC,QAAD,CAAN,CAAiBE,iBAAjB,EAAoC;AACvDW,EAAAA,UAAU,EAAE,MAD2C;AAEvDC,EAAAA,MAAM,EAAE,MAF+C;AAGvDC,EAAAA,OAAO,EAAE;AAH8C,CAApC,CAArB","sourcesContent":["import React from 'react';\nimport styled from 'react-emotion';\nimport { useApolloClient } from '@apollo/client';\n\nimport { menuItemClassName } from '../components/menu-item';\nimport { isLoggedInVar } from '../cache';\nimport { ReactComponent as ExitIcon } from '../assets/icons/exit.svg';\n\nconst LogoutButton = () => {\n  const client = useApolloClient();\n  return (\n    <StyledButton\n      data-testid=\"logout-button\"\n      onClick={() => {\n        // Since we're logging out, remove all traces of the current user\n        // from the cache. First use `cache.evict()` to remove the stored\n        // `me` reference that was added to the cache by the `GET_MY_TRIPS`\n        // query in `profile.tsx`. Then trigger garbage collection using\n        // `cache.gc()` to remove the cached `User` object that is no longer\n        // reachable.\n        client.cache.evict({ fieldName: 'me' });\n        client.cache.gc();\n\n        // Remove user details from localStorage.\n        localStorage.removeItem('token');\n        localStorage.removeItem('userId');\n\n        // Let other parts of the application that are relying on logged in\n        // state know we're now logged out.\n        isLoggedInVar(false);\n      }}\n    >\n      <ExitIcon />\n      Logout\n    </StyledButton>\n  );\n}\n\nexport default LogoutButton;\n\n/**\n * STYLED COMPONENTS USED IN THIS FILE ARE BELOW HERE\n */\n\nconst StyledButton = styled('button')(menuItemClassName, {\n  background: 'none',\n  border: 'none',\n  padding: 0,\n});\n"]},"metadata":{},"sourceType":"module"}